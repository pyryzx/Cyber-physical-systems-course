#include <avr/io.h>
#include <avr/interrupt.h>
#include <avr/sleep.h>
#include <util/delay.h>

#define LED_PIN PB5           

volatile uint8_t tick = 0;    
void setup() {
  DDRB |= (1 << LED_PIN);
  TCCR1A = 0;
  TCCR1B = 0;

  OCR1A = 15624;

  TCCR1B |= (1 << WGM12);

  TCCR1B |= (1 << CS12) | (1 << CS10);

  TIMSK1 |= (1 << OCIE1A);

  sei();
  set_sleep_mode(SLEEP_MODE_IDLE);
}

ISR(TIMER1_COMPA_vect) {
  tick = 1;
}

void loop() {
  if (!tick) {
    sleep_enable();
    sleep_cpu();     
    sleep_disable();
  }

  if (tick) {
    tick = 0;         

    
    PORTB |= (1 << LED_PIN);   
    _delay_ms(100);            
    PORTB &= ~(1 << LED_PIN);  
  }
}
